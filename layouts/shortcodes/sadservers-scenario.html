{{/*
SadServers Scenario Info Box Shortcode
Usage: {{< sadservers-scenario slug="saint-john">}}

    Les donn√©es sont lues depuis data/sadservers_scenarios.json
    */}}

    {{ $slug := .Get "slug" }}
    {{ $scenario := index .Site.Data.sadservers_scenarios $slug }}

    {{ if $scenario }}

    {{/* Default values for missing fields */}}
    {{ $niveau := $scenario.niveau | default "N/A" }}
    {{ $type := $scenario.type | default "N/A" }}
    {{ $access := $scenario.access | default "Public" }}
    {{ $time := $scenario.time_to_solve | default "N/A" }}

    {{/* Level color based on difficulty */}}
    {{ $levelColor := "#4caf50" }}{{/* Default green for Easy */}}
    {{ if eq $niveau "Medium" }}
    {{ $levelColor = "#ff9800" }}
    {{ else if eq $niveau "Hard" }}
    {{ $levelColor = "#f44336" }}
    {{ end }}

    <div
        style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border-radius: 12px; padding: 2rem; margin-bottom: 2.5rem; border: 1px solid #f9a825;">
        {{/* Header: Title + Button */}}
        <div
            style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 1.5rem;">
            <div>
                <h2 style="margin: 0 0 0.75rem 0; color: #f9a825; font-size: 2.8rem;">{{ $scenario.titre }}</h2>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    {{ if $scenario.niveau }}
                    <span
                        style="background: {{ $levelColor }}; color: white; padding: 0.4rem 1rem; border-radius: 6px; font-size: 1.4rem; font-weight: bold;">{{
                        $niveau }}</span>
                    {{ end }}
                    {{ if $scenario.type }}
                    <span
                        style="background: #2196f3; color: white; padding: 0.4rem 1rem; border-radius: 6px; font-size: 1.4rem; font-weight: bold;">{{
                        $type }}</span>
                    {{ end }}
                    {{ if $scenario.root_access }}
                    <span
                        style="background: #9c27b0; color: white; padding: 0.4rem 1rem; border-radius: 6px; font-size: 1.4rem; font-weight: bold;">üîê
                        Root</span>
                    {{ end }}
                </div>
            </div>
            <div style="display: flex; gap: 0.75rem;">
                <a href="{{ $scenario.url }}" target="_blank"
                    style="background: #f9a825; color: #1a1a2e; padding: 0.8rem 1.6rem; border-radius: 8px; text-decoration: none; font-size: 1.5rem; font-weight: bold; white-space: nowrap;">{{
                    T "sadservers_see" }}</a>
            </div>
        </div>

        <hr style="border: none; border-top: 1px solid #f9a825; margin: 1.5rem 0; opacity: 0.3;">

        {{/* Tags */}}
        {{ if $scenario.tags }}
        <div style="margin-bottom: 1.5rem;">
            <span
                style="color: #90a4ae; font-size: 1.3rem; text-transform: uppercase; letter-spacing: 0.5px; font-weight: 600;">Tags:
            </span>
            {{ range $scenario.tags }}
            <span
                style="background: #37474f; color: #4fc3f7; padding: 0.3rem 0.8rem; border-radius: 6px; font-size: 1.2rem; margin-right: 0.4rem;">{{
                . }}</span>
            {{ end }}
        </div>
        {{ end }}

        {{/* Description */}}
        {{ if $scenario.description }}
        <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem;">
            <p style="margin: 0; color: #e0e0e0; font-size: 1.4rem; line-height: 1.6;">
                <strong style="color: #f9a825;">{{ T "sadservers_description" }}:</strong> {{ $scenario.description }}
            </p>
        </div>
        {{ end }}

        {{/* Info Grid - Only show if at least one field has data */}}
        {{ if or $scenario.root_access $scenario.access $scenario.time_to_solve }}
        <div
            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; text-align: left;">
            {{/* Root Access */}}
            <div style="background: rgba(0,0,0,0.15); padding: 1rem; border-radius: 8px;">
                <span style="color: #90a4ae; font-size: 1.2rem; text-transform: uppercase;">{{ T
                    "sadservers_root_access" }}</span>
                <p style="margin: 0.4rem 0 0 0; color: #e0e0e0; font-size: 1.6rem; font-weight: 600;">
                    {{ if $scenario.root_access }}‚úÖ True{{ else }}‚ùå False{{ end }}
                </p>
            </div>

            {{/* Access */}}
            {{ if $scenario.access }}
            <div style="background: rgba(0,0,0,0.15); padding: 1rem; border-radius: 8px;">
                <span style="color: #90a4ae; font-size: 1.2rem; text-transform: uppercase;">{{ T "sadservers_access"
                    }}</span>
                <p style="margin: 0.4rem 0 0 0; color: #e0e0e0; font-size: 1.6rem; font-weight: 600;">{{ $access }}</p>
            </div>
            {{ end }}

            {{/* Time to Solve */}}
            {{ if $scenario.time_to_solve }}
            <div style="background: rgba(0,0,0,0.15); padding: 1rem; border-radius: 8px;">
                <span style="color: #90a4ae; font-size: 1.2rem; text-transform: uppercase;">{{ T "sadservers_time"
                    }}</span>
                <p style="margin: 0.4rem 0 0 0; color: #f9a825; font-size: 1.6rem; font-weight: 600;">‚è±Ô∏è {{ $time }}</p>
            </div>
            {{ end }}
        </div>
        {{ end }}

        {{/* Test Condition */}}
        {{ if $scenario.test }}
        <div
            style="background: rgba(76, 175, 80, 0.1); border-left: 3px solid #4caf50; padding: 0.75rem 1rem; margin-top: 1rem; border-radius: 0 6px 6px 0;">
            <p style="margin: 0; color: #a5d6a7; font-size: 1.4rem;">
                <strong style="color: #4caf50;">{{ T "sadservers_test" }}:</strong> {{ $scenario.test }}
            </p>
        </div>
        {{ end }}
    </div>

    {{ else }}
    <!-- SadServers scenario data not found for slug: {{ $slug }} -->
    {{ end }}